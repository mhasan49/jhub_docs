<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>} &mdash; JupyterHub  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../README.html" class="icon icon-home"> JupyterHub
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart - Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ansible-script.html">Ansible ansible-script</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../README.html">JupyterHub</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../README.html" class="icon icon-home"></a> &raquo;</li>
      <li>}</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/extra/authenticators.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Authenticators</p>
<p>The [Authenticator][] is the mechanism for authorizing users.
Basic authenticators use simple username and password authentication.
JupyterHub ships only with a [PAM][]-based Authenticator,
for logging in with local user accounts.</p>
<p>You can use custom Authenticator subclasses to enable authentication via other systems.
One such example is using [GitHub OAuth][].</p>
<p>Because the username is passed from the Authenticator to the Spawner,
a custom Authenticator and Spawner are often used together.</p>
<p>See a list of custom Authenticators [on the wiki](<a class="reference external" href="https://github.com/jupyterhub/jupyterhub/wiki/Authenticators">https://github.com/jupyterhub/jupyterhub/wiki/Authenticators</a>).</p>
<p>## Basics of Authenticators</p>
<p>A basic Authenticator has one central method:</p>
<p>### Authenticator.authenticate</p>
<blockquote>
<div><p>Authenticator.authenticate(handler, data)</p>
</div></blockquote>
<p>This method is passed the tornado RequestHandler and the POST data from the login form.
Unless the login form has been customized, <cite>data</cite> will have two keys:</p>
<ul class="simple">
<li><p><cite>username</cite> (self-explanatory)</p></li>
<li><p><cite>password</cite> (also self-explanatory)</p></li>
</ul>
<p><cite>authenticate</cite>’s job is simple:</p>
<ul class="simple">
<li><p>return a username (non-empty str)
of the authenticated user if authentication is successful</p></li>
<li><p>return <cite>None</cite> otherwise</p></li>
</ul>
<p>Writing an Authenticator that looks up passwords in a dictionary
requires only overriding this one method:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
from tornado import gen
from IPython.utils.traitlets import Dict
from jupyterhub.auth import Authenticator</p>
<p>class DictionaryAuthenticator(Authenticator):</p>
<blockquote>
<div><dl class="simple">
<dt>passwords = Dict(config=True,</dt><dd><p>help=”””dict of username:password for authentication”””</p>
</dd>
</dl>
<p>)</p>
<p>&#64;gen.coroutine
def authenticate(self, handler, data):</p>
<blockquote>
<div><dl class="simple">
<dt>if self.passwords.get(data[‘username’]) == data[‘password’]:</dt><dd><p>return data[‘username’]</p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>### Authenticator.whitelist</p>
<p>Authenticators can specify a whitelist of usernames to allow authentication.
For local user authentication (e.g. PAM), this lets you limit which users
can login.</p>
<p>## Normalizing and validating usernames</p>
<p>Since the Authenticator and Spawner both use the same username,
sometimes you want to transform the name coming from the authentication service
(e.g. turning email addresses into local system usernames) before adding them to the Hub service.
Authenticators can define <cite>normalize_username</cite>, which takes a username.
The default normalization is to cast names to lowercase</p>
<p>For simple mappings, a configurable dict <cite>Authenticator.username_map</cite> is used to turn one name into another:</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>python
c.Authenticator.username_map  = {</p>
<blockquote>
<div><p>‘service-name’: ‘localname’</p>
</div></blockquote>
<section id="id13">
<h1>}<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h1>
<p>### Validating usernames</p>
<p>In most cases, there is a very limited set of acceptable usernames.
Authenticators can define <cite>validate_username(username)</cite>,
which should return True for a valid username and False for an invalid one.
The primary effect this has is improving error messages during user creation.</p>
<p>The default behavior is to use configurable <cite>Authenticator.username_pattern</cite>,
which is a regular expression string for validation.</p>
<p>To only allow usernames that start with ‘w’:</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">c.Authenticator.username_pattern</span> <span class="pre">=</span> <span class="pre">r'w.*'</span>
<span class="pre">`</span></code></p>
<p>## OAuth and other non-password logins</p>
<p>Some login mechanisms, such as [OAuth][], don’t map onto username+password.
For these, you can override the login handlers.</p>
<p>You can see an example implementation of an Authenticator that uses [GitHub OAuth][]
at [OAuthenticator][].</p>
<p>## Writing a custom authenticator</p>
<p>If you are interested in writing a custom authenticator, you can read [this tutorial](<a class="reference external" href="http://jupyterhub-tutorial.readthedocs.io/en/latest/authenticators.html">http://jupyterhub-tutorial.readthedocs.io/en/latest/authenticators.html</a>).</p>
<p>[Authenticator]: <a class="reference external" href="https://github.com/jupyterhub/jupyterhub/blob/master/jupyterhub/auth.py">https://github.com/jupyterhub/jupyterhub/blob/master/jupyterhub/auth.py</a>
[PAM]: <a class="reference external" href="https://en.wikipedia.org/wiki/Pluggable_authentication_module">https://en.wikipedia.org/wiki/Pluggable_authentication_module</a>
[OAuth]: <a class="reference external" href="https://en.wikipedia.org/wiki/OAuth">https://en.wikipedia.org/wiki/OAuth</a>
[GitHub OAuth]: <a class="reference external" href="https://developer.github.com/v3/oauth/">https://developer.github.com/v3/oauth/</a>
[OAuthenticator]: <a class="reference external" href="https://github.com/jupyterhub/oauthenticator">https://github.com/jupyterhub/oauthenticator</a></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, Project Jupyter team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>